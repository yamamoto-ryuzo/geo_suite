[English: [README_EN.md](README_EN.md)]

## GeoSuite — QGIS デスクトップ + WebGIS フルサイクル ツールスイート

GeoSuite は QGIS を中核に、データ取得から検索、Web 共有、出力（報告書生成）までをワンストップで自動化するプラグイン群です。  
他のシステムも含めた総合的なイメージはこんな感じ。  
<img width="1086" height="609" alt="image" src="https://github.com/user-attachments/assets/532e200b-e794-484a-9e50-3f19567d6936" />
<img width="1099" height="617" alt="image" src="https://github.com/user-attachments/assets/804005dc-2d99-4531-9f50-d70986450a7b" />

## プロジェクト概要

- 自動化対象: データの取り込み（ローカル/CKAN）→ 検索 → Web 共有 → レポート作成（PNG/PDF/XLSX）
- 対象ユーザ: QGIS を業務で使い、社内共有や Web 公開を簡易化したい組織

## ワークフロー概要

```
ローカル/CKAN
	↓
GeoImport（自動 GIS 化）
	↓
GeoSearch（地図内検索）
	↓
GeoWebView（スタイル込 Web 共有）
	↓
GeoReport（レイアウト編集・出力＋報告書生成）
```

## クイックスタート

1. QGIS に各プラグインをインストール（各リポジトリの README を参照）
2. `GeoImport` でデータを登録（CSV/CKAN）
3. `GeoSearch` で対象範囲を検索・抽出
4. `GeoWebView` でスタイル付きパッケージ／パーマリンクを生成し共有
5. `GeoReport` でレイアウトを適用し、高解像度 PNG/PDF と出力メタデータを取得

> 注: Excel (XLSX) 形式で画像を埋め込んだ「完全自動」報告書生成については各プラグイン README の記載に差異があり、現時点では `GeoReport` の機能として README に確定的に記載されていない部分があります。以下の Components セクションで実装状況を明示しています。

## コンポーネント

各コンポーネントは独立したリポジトリで管理されています。ここでは 2025-11-30 時点で各リポジトリ README から確認できた「実装済み（現状）」と、README 上で未実装・今後の課題として扱われている項目を「将来の拡張候補」として明確に分離しています。

---

#### 将来の拡張候補（MCP） — 共通事項

- 埋め込み/Vector DB 利用によるナレッジ連携:
	- 社内ドキュメントや過去プロジェクトのメタを埋め込み化して、RAG として活用（MCP の context_id をキーに検索）。

### GeoImport — 自動 GIS 化（CKAN / ローカル）
- リポジトリ: https://github.com/yamamoto-ryuzo/qgis-data-catalog-integration

- 現状（確認: 2025-11-30）:
	- CKAN サーバおよびローカル CKAN 互換フォルダからの検索・取り込み対応
	- CSV の区切り文字自動判定、文字コード自動判定（UTF-8 / CP932 等）
	- 緯度/経度カラムがあれば自動でポイントジオメトリ化
	- SQLite ベースのローカルキャッシュによる検索高速化

- 将来の拡張候補:
	- STAC / DCAT によるメタデータ連携と自動インデックス化
	- 大容量データ取り込み（並列処理・ストリーミング、S3 互換ストレージ対応）
	- 点群（LAS/LAZ）・3D フィーチャ取り込み（PDAL 統合）
	- 自動ジオリファレンス・座標系検出の改善、データ品質チェック自動化

	#### 将来の拡張候補（MCP）

	- MCP を利用した自動マッピング提案:
	  - ファイルサンプル（CSV/Excel の一部行）と目的（住所→ポイント等）を MCP に渡し、モデルが「フィールドマッピング案」「ジオコーディング候補」「座標列推定」を提示するワークフロー。
	- データ品質と補正の自動提案:
	  - MCP の文脈（サンプル・メタ）を基にモデルが欠損／外れ値候補を報告し、修正ルールを提案（ヒト承認フロー付き）。
	- STAC/メタデータ自動生成:
	  - 取り込んだデータの説明文・タグ・用途候補を MCP で生成し、STAC/CKAN 登録用のメタを自動作成。
	- インポート方針推奨（ポリシー連携）:
	  - 組織ポリシー（公開可否・個人情報扱い）を MCP に含め、モデルが安全な取り込み方法を推奨。

	- メタ・サンプルの埋め込み登録（RAG 連携）:
	  - 取り込み時にファイルメタやサンプル記述を分割して埋め込みを生成し、Vector DB に登録。以降の検索／QA／自動説明生成で再利用するワークフロー。
	  - STAC や CKAN のメタデータを埋め込みに紐付けて `context_id` で参照可能にする。

---

### GeoSearch — 地図内検索（属性・空間検索）
- リポジトリ: https://github.com/yamamoto-ryuzo/GEO-search-plugin

- 現状（確認: 2025-11-30）:
	- 地番・所有者・一般属性検索など複数検索タイプに対応
	- 結果はレイヤ別タブで表示、クリックで地図上にズーム/選択
	- `selectTheme` によるテーマ適用、加算表示モード（既存表示を保持しつつ重ね表示）
	- Qt5/Qt6（QGIS 3.x）互換対応のための安定化措置

- 将来の拡張候補:
	- PostGIS / Elasticsearch / OpenSearch 等を用いた全文検索強化
	- 複数データソース横断のフェデレーション検索、空間インデックス最適化
	- 時系列データ・バージョン管理（履歴検索、差分抽出）
	- 空間解析を組み込んだフィルタ（バッファ、空間結合、属性スコアリング）
	- 機械学習を用いた検索補助（クラスタリング、異常検知）

	#### 将来の拡張候補（MCP）

	- RAG（文脈＋ドキュメント検索）連携（優先）:
	  - 埋め込み検索で社内文書や仕様を参照し、検索結果の信頼度向上や根拠付き回答を提供。
	  - 実装例: クエリ実行前に Vector DB で `top_k=5` をフェッチして抜粋をプロンプトに含め、`source_refs` と `confidence` を出力に含める。
	  - 履歴・変更の参照: 過去クエリや選択状態の埋め込みを使って、類似検索や意図の補完を行う。

---

### GeoWebView — スタイル込 Web 共有
- リポジトリ: https://github.com/yamamoto-ryuzo/QMapPermalink

- 現状（確認: 2025-11-30）:
	- QGIS の表示状態（中心・ズーム・レイヤ可視性・スタイル）をパーマリンク、HTML/PNG パッケージとして出力
	- 軽量 HTTP サーバーでの社内配信、WFS による地物提供
	- MapLibre / OpenLayers へのスタイル注入（MapLibre 用のスタイル注入フローとフォールバック実装あり）
	- 高解像度 PNG 出力、Office（Excel/PowerPoint）向け出力テンプレの例示

- README 備考:
	- ベクタタイルサーバ（VectorTile）導入は README にて "あきらめた開発" と明記されており、当面は開発保留です。

- 将来の拡張候補:
	- QGIS 3D 表示のスナップショット / Cesium・Re:Earth　へのエクスポート連携
	- 点群ビジュアライゼーション（Entwine / Potree / Cesium・Re:Earth 連携）
	- OGC API / WebSocket を使ったリアルタイム更新
	- ベクタタイル生成・タイルキャッシュ・CDN 配信パターン

	#### 将来の拡張候補（MCP）

	- ドキュメント参照による説明文自動生成（RAG）:
	  - パッケージに添付する説明や更新履歴を生成する際に、関連する運用マニュアルや過去の公開ノートを埋め込み検索で参照し、根拠付きの説明を作成する。
	- スタイルガイドの埋め込み検索（補助）:
	  - 組織のスタイルガイドや過去プロジェクトのスタイル事例を埋め込み化して検索可能にし、スタイル転写案の品質向上に利用する。
	- パッケージ化 / 簡易配布テンプレの提案:
	  - 共有対象（社内／公開）やデバイス想定を文脈で渡し、最適な出力（軽量 HTML、PNG 解像度等）をモデルが推奨。
	- アクセス制御助言:
	  - 公開範囲や機密度に基づく配布設定（公開/社内限定/事前承認必須）を MCP が補助し、運用ガイドを生成。


---
 
### GeoReport — レイアウト編集・出力 ＋ 報告書生成
- リポジトリ: https://github.com/yamamoto-ryuzo/qgis-layoutitem-selector

- 現状（確認: 2025-11-30）:
	- レイアウトテンプレートの保存・一括適用（JSON ベースのテンプレ化）
	- レイアウト内アイテム（地図・凡例・ラベル・画像等）のバッチ編集
	- 印刷範囲（RubberBand）表示とマウスでの移動・調整
	- Atlas 的な複数図面の一括出力、PNG/PDF の高解像度出力
	- 多言語対応や安定性向上のための改善がドキュメント化

- 将来の拡張候補:
	- 3D スナップショット統合（静止画・簡易インタラクティブビュー）
	- 点群・断面図生成（断面抽出、属性統計、サマリ表）
	- Jupyter / Papermill による再現可能なレポート生成フロー
	- Excel (XLSX) レポートのテンプレート化（画像埋め込み・注釈自動配置等）
	- 大量出力のための分散実行と途中再開機能

	#### 将来の拡張候補（MCP）

	- 過去報告との類似/差分検出（埋め込み検索）:
	  - 生成前に過去の報告書・図版を埋め込み検索して類似図版や差分を抽出。差分の自然文サマリや注記候補をモデルが生成して、レビュー用のメタを付与する。
	- 出力根拠の添付（source_refs）:
	  - 自動生成したキャプションや要約には、参照した資料の `source_refs` を付与し、説明の出所を追跡可能にする。

---

## 想定シナリオ

- 社内報告書作成: `GeoImport` → `GeoSearch` → `GeoWebView` → `GeoReport`
- Web 地図公開: `GeoWebView` でパッケージ化・パーマリンク共有
- 大量出力: レイアウトテンプレートを用いた一括出力（例: 100 枚の Atlas）

## 貢献

## 関連ツール

- `yr-qgis-launcher` — ポータブルQGIS・QField環境ランチャー

- リポジトリ: https://github.com/yamamoto-ryuzo/yr-qgis-launcher

- 現状（確認: 2025-11-30）:
	- `ProjectFile.exe` による指定プロジェクトの直接起動、および権限別 UI / `startup.py` を用いたレイヤ初期化機能
	- `local-launcher.bat` / `qgislocalsync.config` によるローカル同期（`robocopy` ベース）と、同期後の自動起動ワークフロー
	- ポータブル版 QGIS / QField のバージョン比較による差分同期と管理、組込済みプラグインのサンプル一覧を含む
	- Windows バッチ主体の構成のため、展開パスは英数字のみ、改行コード等の運用注意が README に記載されている

- 用途:
	- オフライン/ポータブル環境配布や、BOX 等クラウドストレージからの同期を利用した統一実行環境構築に有用


- 各コンポーネントはそれぞれの GitHub リポジトリで管理しています。バグ報告や機能要望は該当リポジトリの Issues にお願いします。
- ドキュメント修正・翻訳や Quickstart の改善はこのリポジトリで歓迎します。プルリクエストをお送りください。

## サポートとライセンス

- 問い合わせ: 各リポジトリの Issues を利用してください。
- ライセンス: 各リポジトリの README / LICENSE を参照してください。

---

注: このファイルは 2025-11-30 時点で各コンポーネントの README を参照して再構成しました。個別リポジトリの最新情報が必要な場合は、各リポジトリの README と `CHANGELOG.md` を参照してください。

## 免責事項

本システムは個人のPCで作成・テストされたものです。  
ご利用によるいかなる損害も責任を負いません。

<p align="center">
  <a href="https://giphy.com/explore/free-gif" target="_blank">
    <img src="https://github.com/yamamoto-ryuzo/QGIS_portable_3x/raw/master/imgs/giphy.gif" width="500" title="avvio QGIS">
  </a>
</p>


